(this["webpackJsonpsok-frontend"]=this["webpackJsonpsok-frontend"]||[]).push([[0],{252:function(e,t,n){"use strict";n.r(t);var s=n(8),o=n.n(s),a=n(105),i=n.n(a),d=n(106),r=n(107),c=n(110),h=n(109),u=n(108),p=n.n(u),g=n(4),l="https://api.sok.runtimeerrorstudio.com/",f=function(e){Object(c.a)(n,e);var t=Object(h.a)(n);function n(e){var s;return Object(d.a)(this,n),(s=t.call(this,e)).state={graph:{nodes:[],edges:[]},visited_tags:new Set,nodes_id_map:{},nodes_tag_map:{},last_used_id:0},s}return Object(r.a)(n,[{key:"getNumEdges",value:function(e,t){return t.filter((function(t){return t.to===e})).length}},{key:"extendGraph",value:function(e,t){var n=this,s=t,o=this.state.last_used_id,a=this.state.graph.nodes,i=this.state.graph.edges;console.log(i,a);var d=this.state.nodes_id_map,r=this.state.nodes_tag_map,c=this.state.visited_tags;fetch(l+"getTopN?n=10&tag="+encodeURIComponent(e)).then((function(e){return e.json()})).then((function(t){c.add(e),t.ds.forEach((function(e){e.d;e.ts.forEach((function(e){var t=e.t;t in r?(console.log(t,"already exists"),i.push({from:s,to:r[t]})):(console.log(t,"is new"),i.push({from:s,to:o}),a.push({id:o,label:t,shape:"box"}),d[o]=t,r[t]=o,console.log(o),o++)}))}))})).then((function(e){a=a.map((function(e){var t=r[e.label],s=n.getNumEdges(t,i);return e.borderWidth=s,e})),n.state.network.setData({nodes:a,edges:i}),n.setState({graph:{nodes:a,edges:i},nodes_id_map:d,nodes_tag_map:r,visited_tags:c,last_used_id:o},(function(){return console.log("extend graph done",n.state.graph)}))}))}},{key:"reloadGraph",value:function(e){var t=this,n=1,s=[{id:0,label:e,shape:"box"}],o=[],a={},i={};a[0]=e,i[e]=0;var d=this.state.visited_tags;fetch(l+"getTopN?n=10&tag="+encodeURIComponent(e)).then((function(e){return e.json()})).then((function(t){d.add(e),t.ds.forEach((function(e){e.d;e.ts.forEach((function(e){var t=e.t;s.push({id:n,label:t,shape:"box"}),a[n]=t,i[t]=n,o.push({from:0,to:n}),n++}))}))})).then((function(e){t.state.network.setData({nodes:s,edges:o}),t.setState({graph:{nodes:s,edges:o},nodes_id_map:a,nodes_tag_map:i,visited_tags:d,last_used_id:n},(function(){return console.log("reload graph done",t.state)}))}))}},{key:"componentDidMount",value:function(){this.reloadGraph("computer-science")}},{key:"render",value:function(){var e=this;return Object(g.jsx)("div",{children:Object(g.jsx)(p.a,{graph:this.state.graph,getNetwork:function(t){return e.setState({network:t})},physics:{enabled:!0,stabilization:{iterations:0}},options:{edges:{color:"#000000",arrows:{to:{enabled:!1}}},height:.95*window.innerHeight+"px"},events:{doubleClick:function(t){if(t.nodes.length>0){var n=t.nodes[0],s=e.state.nodes_id_map[n];e.setState({nodes:[],visited_tags:new Set,nodes_id_map:{},nodes_tag_map:{},edges:[],id:0},(function(){return e.reloadGraph(s)}))}},hold:function(t){if(t.nodes.length>0){var n=t.nodes[0],s=e.state.nodes_id_map[n];e.state.visited_tags.has(s)||e.extendGraph(s,n)}}}})})}}]),n}(o.a.Component);var _=function(){return Object(g.jsx)("div",{className:"App",children:Object(g.jsx)(f,{})})};i.a.render(Object(g.jsx)(_,{}),document.getElementById("root"))}},[[252,1,2]]]);
//# sourceMappingURL=main.83fa1301.chunk.js.map