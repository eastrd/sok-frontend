(this["webpackJsonpsok-frontend"]=this["webpackJsonpsok-frontend"]||[]).push([[0],{252:function(e,t,n){"use strict";n.r(t);var s=n(8),a=n.n(s),o=n(105),i=n.n(o),r=n(106),d=n(107),c=n(110),h=n(109),u=n(108),p=n.n(u),l=n(4),g="https://api.sok.runtimeerrorstudio.com/",f={universe:5,"computer-science":3,"brazilian-jiu-jitsu":5,game:10,marvel:10,apocalypse:7},_=Object.keys(f)[Math.floor(Math.random()*Object.keys(f).length)],m=f[_],v=function(e){Object(c.a)(n,e);var t=Object(h.a)(n);function n(e){var s;return Object(r.a)(this,n),(s=t.call(this,e)).state={graph:{nodes:[],edges:[]},visited_tags:new Set,nodes_id_map:{},nodes_tag_map:{},last_used_id:0},s}return Object(d.a)(n,[{key:"getNumEdges",value:function(e,t){return t.filter((function(t){return t.to===e})).length}},{key:"extendGraph",value:function(e,t){var n=this,s=t,a=this.state.last_used_id,o=this.state.graph.nodes,i=this.state.graph.edges;console.log(i,o);var r=this.state.nodes_id_map,d=this.state.nodes_tag_map,c=this.state.visited_tags;fetch(g+"getTopN?n="+m+"&tag="+encodeURIComponent(e)).then((function(e){return e.json()})).then((function(t){c.add(e),t.ds.forEach((function(e){e.d;e.ts.forEach((function(e){var t=e.t;t in d?(console.log(t,"already exists"),i.push({from:s,to:d[t]})):(console.log(t,"is new"),i.push({from:s,to:a}),o.push({id:a,label:t,shape:"box"}),r[a]=t,d[t]=a,console.log(a),a++)}))}))})).then((function(e){o=o.map((function(e){var t=d[e.label],s=n.getNumEdges(t,i);return e.borderWidth=s,e})),n.state.network.setData({nodes:o,edges:i}),n.setState({graph:{nodes:o,edges:i},nodes_id_map:r,nodes_tag_map:d,visited_tags:c,last_used_id:a},(function(){return console.log("extend graph done",n.state.graph)}))}))}},{key:"reloadGraph",value:function(e){var t=this,n=1,s=[{id:0,label:e,shape:"box"}],a=[],o={},i={};o[0]=e,i[e]=0;var r=this.state.visited_tags;fetch(g+"getTopN?n="+m+"&tag="+encodeURIComponent(e)).then((function(e){return e.json()})).then((function(t){r.add(e),t.ds.forEach((function(e){e.d;e.ts.forEach((function(e){var t=e.t;t in i||(s.push({id:n,label:t,shape:"box"}),o[n]=t,i[t]=n,a.push({from:0,to:n}),n++)}))}))})).then((function(e){t.state.network.setData({nodes:s,edges:a}),t.setState({graph:{nodes:s,edges:a},nodes_id_map:o,nodes_tag_map:i,visited_tags:r,last_used_id:n},(function(){return console.log("reload graph done",t.state)}))}))}},{key:"componentDidMount",value:function(){this.reloadGraph(_)}},{key:"render",value:function(){var e=this;return Object(l.jsx)("div",{children:Object(l.jsx)(p.a,{graph:this.state.graph,getNetwork:function(t){return e.setState({network:t})},physics:{enabled:!0,stabilization:{iterations:0}},options:{edges:{color:"#000000",arrows:{to:{enabled:!1}}},height:.95*window.innerHeight+"px"},events:{doubleClick:function(t){if(t.nodes.length>0){var n=t.nodes[0],s=e.state.nodes_id_map[n];e.setState({nodes:[],visited_tags:new Set,nodes_id_map:{},nodes_tag_map:{},edges:[],id:0},(function(){return e.reloadGraph(s)}))}},hold:function(t){if(t.nodes.length>0){var n=t.nodes[0],s=e.state.nodes_id_map[n];e.state.visited_tags.has(s)||e.extendGraph(s,n)}}}})})}}]),n}(a.a.Component);var b=function(){return Object(l.jsx)("div",{className:"App",children:Object(l.jsx)(v,{})})};i.a.render(Object(l.jsx)(b,{}),document.getElementById("root"))}},[[252,1,2]]]);
//# sourceMappingURL=main.1a4ea977.chunk.js.map